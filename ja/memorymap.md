# メモリ構成

## 全体

プログラムは以下のようなメモリ構成でビルドされます。

|エリア              |解説                                                                  |
|--------------------|----------------------------------------------------------------------|
|                    |↑ アドレス 0x0000                                                    |
|バイナリエリア      |プログラム、データ、文字リテラルが含まれるエリアです。                |
|                    |↓ これ以降はバイナリファイルに含まれません                           |
|仮想型データエリア  |virtual修飾子をつけたデータ型が指すエリアです。                       |
|ヒープエリア        |予約されていないメモリです。システム変数 __heap で参照できます。      |
|仮想プログラムエリア|virtual指定でimportしたプログラムが格納されているとみなすエリアです。 |
|                    |↓ アドレス 0xFFFF                                                    |

## プログラムエリア

さらにプログラムエリアは以下の構成になっています。

|エリア                 |解説                                                               |
|-----------------------|-------------------------------------------------------------------|
|メインプログラムエリア |主処理(関数の外)に書いたプログラムが出力されるエリア               |
|                       |                                                                   |
|関数エリア             |関数定義されたプログラム                                           |
|関数データエリア       |関数内に定義されたデータのエリア                                   |
|                       |※関数の数だけ繰り返し                                             |
|importプログラムエリア |importで取り込んだプログラムが含まれるエリア                       |
|                       |※関数の数だけ繰り返し                                             |


| 1 | 2 | 3 |
|---|---|---|
|>  |   |   |
