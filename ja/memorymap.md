# メモリ構成
ページを切り替えたり、ROM化したりする場合などに役に立つ情報かもしれません。

## 全体

プログラムは以下のようなメモリ構成でビルドされます。

|エリア              |解説                                                                  |
|:-------------------|:---------------------------------------------------------------------|
|                    |↑ アドレス 0x0000                                                    |
|バイナリエリア      |プログラム、データ、文字リテラルが含まれるエリアです。                |
|                    |↓ これ以降はバイナリファイルに含まれません。                         |
|仮想型データエリア  |virtual修飾子をつけたデータ型が指すエリアです。                       |
|ヒープエリア        |予約されていないメモリです、システム変数 __heap で参照できます。      |
|仮想プログラムエリア|virtual指定でimportしたプログラムが格納されているとみなすエリアです。 |
|                    |↓ アドレス 0xFFFF                                                    |

## バイナリエリア

さらにバイナリエリアは以下の構成になっています。

|エリア                |解説                                                                |
|:---------------------|:-------------------------------------------------------------------|
|メインプログラムエリア|主処理(関数の外)のプログラムが出力されるエリア。                    |
|関数エリア [ ]        |関数のプログラムとデータが出力されるエリア。関数毎に繰り返されます。|
|データエリア          |主処理の変数が定義されたエリア。                                    |
|importエリア [ ]      |上記構成がimportの数だけ繰り返されます。                            |
